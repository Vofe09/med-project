{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/med-project/lib/db.js"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nlet pool;\r\n\r\nif (!pool) {\r\n    pool = mysql.createPool({\r\n        host: process.env.DB_HOST,\r\n        user: process.env.DB_USER,\r\n        password: process.env.DB_PASS,\r\n        database: process.env.DB_NAME\r\n    });\r\n}\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI;AAEJ,IAAI,CAAC,MAAM;IACP,OAAO,sIAAK,CAAC,UAAU,CAAC;QACpB,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,UAAU,QAAQ,GAAG,CAAC,OAAO;QAC7B,UAAU,QAAQ,GAAG,CAAC,OAAO;IACjC;AACJ;uCAEe"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///C:/med-project/pages/api/login.js"],"sourcesContent":["import pool from \"../../lib/db\";\r\nimport bcrypt from \"bcrypt\";\r\n\r\nexport default async function handler(req, res) {\r\n    if (req.method !== \"POST\") {\r\n        return res.status(405).json({ message: \"Метод не разрешён\" });\r\n    }\r\n\r\n    const { email, password } = req.body;\r\n\r\n    if (!email || !password) {\r\n        return res.status(400).json({ message: \"Введите email и пароль\" });\r\n    }\r\n\r\n    try {\r\n        const [rows] = await pool.query(\r\n            \"SELECT * FROM users WHERE email = ?\",\r\n            [email]\r\n        );\r\n\r\n        if (rows.length === 0) {\r\n            return res.status(400).json({ message: \"Пользователь не найден\" });\r\n        }\r\n\r\n        const user = rows[0];\r\n\r\n        const isValid = await bcrypt.compare(password, user.password);\r\n\r\n        if (!isValid) {\r\n            return res.status(400).json({ message: \"Неверный пароль\" });\r\n        }\r\n\r\n        res.status(200).json({\r\n            message: \"Вход выполнен\",\r\n            username: user.username,\r\n            id: user.id\r\n        });\r\n\r\n    } catch (err) {\r\n        console.error(err);\r\n        res.status(500).json({ message: \"Ошибка сервера\" });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;;;AAGe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC1C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACvB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAoB;IAC/D;IAEA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;IAEpC,IAAI,CAAC,SAAS,CAAC,UAAU;QACrB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAyB;IACpE;IAEA,IAAI;QACA,MAAM,CAAC,KAAK,GAAG,MAAM,6GAAI,CAAC,KAAK,CAC3B,uCACA;YAAC;SAAM;QAGX,IAAI,KAAK,MAAM,KAAK,GAAG;YACnB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAAyB;QACpE;QAEA,MAAM,OAAO,IAAI,CAAC,EAAE;QAEpB,MAAM,UAAU,MAAM,OAAO,OAAO,CAAC,UAAU,KAAK,QAAQ;QAE5D,IAAI,CAAC,SAAS;YACV,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAAkB;QAC7D;QAEA,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YACjB,SAAS;YACT,UAAU,KAAK,QAAQ;YACvB,IAAI,KAAK,EAAE;QACf;IAEJ,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAiB;IACrD;AACJ"}}]
}