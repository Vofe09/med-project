{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/med-project/lib/db.js"],"sourcesContent":["import mysql from \"mysql2/promise\";\r\n\r\nlet pool;\r\n\r\nif (!pool) {\r\n  pool = mysql.createPool({\r\n    host: process.env.DB_HOST,\r\n    port: process.env.DB_PORT || 4000,\r\n    user: process.env.DB_USER,\r\n    password: process.env.DB_PASS,\r\n    database: process.env.DB_NAME,\r\n    ssl: {\r\n      rejectUnauthorized: true\r\n    }\r\n  });\r\n}\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI;AAEJ,IAAI,CAAC,MAAM;IACT,OAAO,sIAAK,CAAC,UAAU,CAAC;QACtB,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;QAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO;QACzB,UAAU,QAAQ,GAAG,CAAC,OAAO;QAC7B,UAAU,QAAQ,GAAG,CAAC,OAAO;QAC7B,KAAK;YACH,oBAAoB;QACtB;IACF;AACF;uCAEe"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/med-project/pages/api/register.js"],"sourcesContent":["import pool from \"../../lib/db\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\n\r\nexport default async function handler(req, res) {\r\n    if (req.method !== \"POST\") {\r\n        return res.status(405).json({ message: \"Метод не разрешён\" });\r\n    }\r\n\r\n    const { username, email, password } = req.body;\r\n\r\n    if (!username || !email || !password) {\r\n        return res.status(400).json({ message: \"Заполните все поля\" });\r\n    }\r\n\r\n    try {\r\n        const hashed = await bcrypt.hash(password, 10);\r\n\r\n        const [result] = await pool.query(\r\n            \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\",\r\n            [username, email, hashed]\r\n        );\r\n\r\n        res.status(200).json({ message: \"Регистрация успешна\" });\r\n    } catch (err) {\r\n        if (err.code === \"ER_DUP_ENTRY\") {\r\n            return res.status(400).json({ message: \"Этот email уже используется\" });\r\n        }\r\n\r\n        console.error(err);\r\n        res.status(500).json({ message: \"Ошибка сервера\" });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAGe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC1C,IAAI,IAAI,MAAM,KAAK,QAAQ;QACvB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAoB;IAC/D;IAEA,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;IAE9C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU;QAClC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAqB;IAChE;IAEA,IAAI;QACA,MAAM,SAAS,MAAM,2HAAM,CAAC,IAAI,CAAC,UAAU;QAE3C,MAAM,CAAC,OAAO,GAAG,MAAM,6GAAI,CAAC,KAAK,CAC7B,kEACA;YAAC;YAAU;YAAO;SAAO;QAG7B,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAsB;IAC1D,EAAE,OAAO,KAAK;QACV,IAAI,IAAI,IAAI,KAAK,gBAAgB;YAC7B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,SAAS;YAA8B;QACzE;QAEA,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAAiB;IACrD;AACJ"}}]
}